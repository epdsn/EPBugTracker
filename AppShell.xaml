<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="EPBugTracker.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:EPBugTracker"
    Title="EPBugTracker"
    Shell.TabBarIsVisible="False">

    <!-- Title + route links on one row, menu placed immediately after title -->
    <Shell.TitleView>
        <!-- two-row grid: content row + 1px bottom border -->
        <Grid Padding="16,0" ColumnSpacing="12" VerticalOptions="Start">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="1" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <!-- title width based on content -->
                <ColumnDefinition Width="Auto" />
                <!-- menu width based on content and placed next to title -->
                <ColumnDefinition Width="Auto" />
                <!-- filler to take remaining space -->
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- App title -->
            <Label Text="EP Bug Tracker"
                   FontSize="15"
                   VerticalOptions="Center"
                   HorizontalOptions="Start"
                   Grid.Row="0" Grid.Column="0"
                   Margin="0,6,0,6" />

            <!-- Route links (styled using RouteLink) placed immediately after title -->
            <HorizontalStackLayout Grid.Row="0" Grid.Column="1"
                                   Spacing="12"
                                   VerticalOptions="Center"
                                   HorizontalOptions="Start"
                                   Padding="0">
                <Button x:Name="HomeLinkBtn" Text="Home" Clicked="OnNavigateHome"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource RouteLink}"
                        HeightRequest="28" VerticalOptions="Center" Padding="6,2" />

                <Button x:Name="UsersLinkBtn" Text="Users" Clicked="OnNavigateUsers"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource RouteLink}"
                        HeightRequest="28" VerticalOptions="Center" Padding="6,2" />

                <Button x:Name="AttachLinkBtn" Text="Sources" Clicked="OnNavigateAttach"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource RouteLink}"
                        HeightRequest="28" VerticalOptions="Center" Padding="6,2" />
            </HorizontalStackLayout>

            <!-- bottom 1px separator -->
            <BoxView Grid.Row="1" Grid.ColumnSpan="3" HeightRequest="1" Color="{StaticResource ToolbarBorder}" />
        </Grid>
    </Shell.TitleView>

    <TabBar>
        <ShellContent
            Title="Home"
            ContentTemplate="{DataTemplate local:MainPage}"
            Route="MainPage" />
        <ShellContent
            Title="Users"
            ContentTemplate="{DataTemplate local:UsersPage}"
            Route="UsersPage" />
    </TabBar>

</Shell>
